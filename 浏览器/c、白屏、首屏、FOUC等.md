## 浏览器渲染出现的问题

### 白屏问题：

白屏时间指的是浏览器开始显示内容的时间，一般认为浏览器开始渲染body或者解析完head标签的时候就是页面白屏结束的时间。

计算方法：IE8-： title后输出一个时间pagestartime;

head结束前 输出一个时间firstpaint。

白屏时间=firstpaint-pagestarttime/performance.timing.navigationStart;

- 原因：
  - 先加载CSS，加载完成后再对HTML进行渲染，**如果CSS加载时间过长，则导致白屏；**
  - 使用@import，**即使css放在link标签里，也有可能导致白屏；**
  - 在IE浏览器下：css放置在页面底部，在某些场景下(新窗口打开,刷新等)页面会出现白屏,而不是内容逐步展现；
  - **JS放置在头部阻塞后面内容的下载；**

+ 优化
  + 加快js的执行速度，比如无限滚动的页面，可以用js先渲染一个屏幕范围内的东西
  + 减少文件体积
  + 首屏同步渲染html,后续的滚屏再异步加载和渲染。

### 首屏

首屏时间是指用户打开网站开始，到浏览器首屏内容渲染完成的时间。

计算方法：

1.模块标签标记。适用于内容不需要拉取数据才能生存以及页面不考虑图片等资源的加载情况。结束位置加时间戳输出时间。

2.统计首屏内图片加载最慢事件。 通常图片加载最慢，所以会把首屏内加载事件最慢的图片时间。

3.自定义计算

**优化**

首屏数据拉取逻辑放在顶部（数据最快返回）

首屏渲染css及js逻辑优先内联html，返回时能立即执行

次屏逻辑延后执行











### FOUC（无样式内容闪烁）

- 原因：
  - 因为浏览器渲染机制问题，在CSS加载之前，先呈现了HTML，就会出现逐步展示无样式内容，然后样式突然跳出来的问题；

总结：

- 如果等待CSS下载完成后才进行渲染，那么就有可能导致白屏；
- 如果先展示页面，等CSS下载完成后再渲染，就有可能导致FOUC问题；

解决：

+ CSS放置在头部（head）里，JS放置在body之前；





