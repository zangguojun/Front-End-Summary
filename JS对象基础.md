# 对象

## Object对象

### 一、对象的特点

* 引用数据类型
* 无序集合
* 可以从原型对象中继承属性
* 经常会用途来存储和传输数据

### 二、对象的创建

```js
//第一种
var person = new Object()
person.name = 'AAA'
person.age = 22
//第二种
var person = {
    name:'AAA',
    age:22
}
```

### 三、对象的属性访问

```js
//////读取属性//////
//第一种
person.name
//第二种
person['name']

//////修改属性//////
person.name = 'BBB'

//////删除属性//////
delete person.name

//////constructor//////
//每个对象中都有一个constructor属性，它引用了当前对象的构造函数。
```

## 数据类型分类

### 一、基本数据类型

* string
* number
* boolean
* null
* undefined

> 基本数据类型无法修改，是不可变的
>
> 基本数据类型的比较是值的比较。两个变量的值相等，两个变量就相等

### 二、引用数据类型

> 引用数据类型的值是保存在内存中的对象
>
> 当一个变量是一个对象时，实际上变量中保存的不是对象本身，而是对象的引用，当一个变量向另一个变量复制引用类型的值时，会将对象的引用复制到变量中，并不是创建一个新的对象。两个变量指向的是同一个对象。因此，改变其中 一个变量会影响另一个。

## 栈和堆

> JavaScript在运行时数据是保存到栈内存和堆内存当中的
>
> 栈内存用来保存变量和基本类型
>
> 堆内存用来保存对象
>
> 我们在声明一个变量时实际上就是在栈内存中创建了一个空间 用来保存变量
>
> 如果是基本类型则在栈内存中直接保存
>
> 如果是引用类型则会在堆内存中保存，变量中保存的实际上对象在堆内存中的地址。

![image-20210227210218906](https://cdn.jsdelivr.net/gh/zangguojun/PicGo/20210227210227.png)

## 执行环境

> 执行环境定义了变量或函数有权访问的其他数据，决定了它们各自的行为
>
> 每个执行环境都有一个与之关联的变量对象，环境中定义的所有变量和函数都保存在这个对象中。
>
> 全局执行环境是最外围的一个执行环境。在 Web 浏览器中，全局执行环境被认为是 window 对象，因此所有全局变量和函数都是作为 window 对象的属性和方法创建的。
>
> 某个执行环境中的所有代码执行完毕后，该环境被销毁，保存在其中的所有变量和函数定义也随之销毁
>
> 在内部环境可以读取外部环境的变量，反之则不行。

## 函数内部属性

### 一、arguments

> 该对象实际上是一个数组，用于保存函数的参数。
>
> 同时该对象还有一个属性callee来表示当前函数。

### 二、this

> this 引用的是一个对象。
>
> 在最外层代码中，this 引用的是全局对象。
>
> 在函数内，this 根据函数调用方式的不同 而有所不同：（如下图）

![image-20210227211114847](https://cdn.jsdelivr.net/gh/zangguojun/PicGo/20210227211115.png)

## 构造函数

> 构造函数本身和普通的函数声明形式相同
>
> 构造函数通过 new 关键字来调用，new 关键字会新创建一个对象并返回。
>
> 通过 new关键字调用的构造函数内的 this 引用了（被新生成的）对象。

## new关键字

* 首先，会先创建一个空的对象。
* 然后，会执行相应的构造函数。构造函数中的this将会引用这个新对象
* 最后，将对象作为执行结果返回。

> 构造函数总是由new关键字调用
>
> 构造函数和普通函数的区别就在于调用方式的不同。
>
> 任何函数都可以通过new来调用，所以函数都可以是构造函数。
>
> 构造函数的首字母习惯性大写

## 垃圾回收

> 不再使用的对象的内存将会自动回收，这 种功能称作垃圾回收。
>
> 所谓不再使用的对象，指的是没有被任何 一个属性（变量）引用的对象。
>
> 垃圾回收的目的是，使开发者不必为对象 的生命周期管理花费太多精力

## 原型继承

> JS是一门面向对象的语言，而且它还是一个基于原型的面向对 象的语言。
>
> 所谓的原型实际上指的是，在构造函数中存在着一个名为原型 的(prototype)对象，这个对象中保存着一些属性，凡是通过该 构造函数创建的对象都可以访问存在于原型中的属性。

### 一、获取原型对象

> 可以添加修改删除原型中的属性
>
> 可以修改原型对象的引用
>
> prototype属性只存在于函数对象中，其他对象没有prototype属性
>
> 每一个对象都有原型，包括原型对象也有原型。
>
> Object的原型对象没有原型。

```js
Object.getPrototypeOf(对象)
构造函数. prototype
对象. constructor.prototype
对象.__proto__
```

### 二、原型链

```js
var B =function(){}
var bb = new B()
//下面四个完全相等
//Object.getPrototypeOf(对象)
//构造函数.prototype
//对象. constructor.prototype
//对象.__proto
//-----
//Object.getPrototypeOf(bb)
//B.prototype
//bb.__proto__
//bb.constructor.prototype

//原型链为：
//bb对象=》
//bb对象的原型（也就是B的原型）=》
//bb对象原型的原型（也就是Object）=》
//Object的原型
//undefined
```

> 当从一个对象中获取属性时，会首先从当前对象中查找，如果没有则顺着向上查找原型对象，直到找到Object对象的原型位置，找到则返回，找不到则返回undefined。

## instanceof

> typeof对于对象区分这个对象是不是函数
>
> var result = 变量 instanceof 类型

## 引用类型

> 对象，全部是引用数据类型
>
> Array（数组），Function （函数）这些都是不同的类型对象
>
> 上至Object对象

## Array

> 数组是一种用于表达有顺序关系的值的集合的语言结构。

### 一、创建数组

```js
//第一种
var arr = []
//第二种
var arr = new Array()
//传入一个参数：代表数组的长度
//传入两个以及以上参数：代表数组元素
```

## Date

> Date类型用来表示一个时间。
>
> Date采取的是时间戳的形式表示时间，所谓的时间戳指的是从1970年1月1日0时0秒0分开始经过的毫秒数来计算时间

### 一、创建时间对象

```js
//不传参
var d = new Date()
//传入一个毫秒数
var d = new Date(666666666)
//传入一个日期字符串
var d = new Date('06/13/2004 12:12:12')
var d = new Date('2021-9-30 12:20')
var d = new Date('2021/9/30 12:20')
```

## Function

> 函数是由一连串的子程序（语句的集合）所组成的
>
> 如果只是对函数进行了声明， 其中的代码并不会执行。只有在调用函数时才会执行函数 体内部的代码。
>
> Function类型代表一个函数，每一个函数都是一个Function类 型的对象。而且都与其他引用类型一样具有属性和方法。
>
> 由于函数是对象，因此函数名实际上也是一个指向函数对象的 指针，不会与某个函数绑定。

### 一、函数的声明

```js
//函数声明提升
function sum(){}

var sum = function(){}
```

### 二、函数传递参数(函数也可以作为参数,变量后不要加())

> JS中的所有的参数传递都是按值传递的。 也就是说把函数外部的值赋值给函数内部的参数，就和把值从一个变量赋值给另一个变量是一样的。

### 三、函数对象的方法

> 每个函数都有两个方法call()和apply()
>
> call()和apply()都可以指定一个函数的运行环境对象，也就是设置函数执行时的this值

```js
//call和apply的不同之处在于传递参数的方式
函数对象.call(this对象,参数数组)
函数对象.apply(this对象,参数1,参数2,参数N)
```

## 闭包（closure）

> 当前作用域总是能够访问外部作用域中的变量。
>
> 因为函数是JS中唯一拥有自身作用域的结构，因此闭包的创建依赖于函数
>
> 闭包的特征理解为，其相关的局部变量在函数调用结束之后将会继续存在

## 基本包装类型

### 一、Boolean

> 我们最好永远不要使用Boolean包装类

### 二、Number

> 使用数值时我们建议使用基本数值，而不 建议使用包装类

### 三、String

> 可以使用length属性来获取字符串的长度

## Math

> JS 还为保存数学公式和信息提供了一个公 共位置，即 Math 对象
>
> JavaScript 直接编写的计算功能相比，Math 对象提供的计算功能执行起来要快得多。
>
>  Math 对象中还提供了辅助 完成这些计算的属性和方法。

### 一、属性

![image-20210227215814092](https://cdn.jsdelivr.net/gh/zangguojun/PicGo/20210227215815.png)

### 二、方法

最大最小值：

> Math.max()
>
> Math.min()

舍入：

> 向上舍 Math.ceil()
>
> 向下舍 Math.floor()
>
> 四舍五入 Math.round()

随机数：

> Math.random()
>
> 选取某个范围内的随机值：
>
> 值 = Math.floor(Math.random() * 可能值的总数 + 第一个可能的值)

