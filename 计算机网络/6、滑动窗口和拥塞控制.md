## 滑动窗口

**TCP 利用滑动窗口实现流量控制。流量控制是为了控制发送方发送速率，保证接收方来得及接收。** 接收方发送的**确认报文中的窗口字段**可以用来**控制发送方窗口大小**，从而**影响发送方的发送速率**。将窗口字段设置为 0，则发送方不能发送数据。



## 拥塞控制

在某段时间，若对网络中某一**资源的需求**超过了该**资源所能提供的可用部分**，**网络的性能**就要**变坏**。这种情况就叫**拥塞**。拥塞控制就是为了防止过多的数据注入到网络中，这样就可以**使网络中的路由器或链路不致过载**。拥塞控制所要做的都有一个前提，就是网络能够承受现有的网络负荷。拥塞控制是一个全局性的过程，涉及到所有的主机，所有的路由器，以及与降低网络传输性能有关的所有因素。相反，**流量控制往往是点对点通信量的控制，是个端到端的问题**。**流量控制所要做到的就是抑制发送端发送数据的速率，以便使接收端来得及接收。**

为了进行拥塞控制，TCP 发送方要维持一个 **拥塞窗口(cwnd)** 的状态变量。**拥塞控制窗口的大小取决于网络的拥塞程度**，并且动态变化。**发送方让自己的发送窗口取为拥塞窗口和接收方的接受窗口中较小的一个**。

TCP的拥塞控制采用了四种算法，即 **慢开始** 、 **拥塞避免** 、**快重传** 和 **快恢复**。在网络层也可以使**路由器采用适当的分组丢弃策略**（如主动队列管理 AQM），以减少网络拥塞的发生。

- **慢开始：** 慢开始算法的思路是当主机开始发送数据时，如果立即把大量数据字节注入到网络，那么可能会引起网络阻塞，因为现在还不知道网络的符合情况。经验表明，较好的方法是先探测一下，即由小到大逐渐增大发送窗口，也就是由小到大逐渐增大拥塞窗口数值。cwnd初始值为1，每经过一个传播轮次，cwnd加倍。
- **拥塞避免：** 拥塞避免算法的思路是让拥塞窗口cwnd缓慢增大，**即每经过一个往返时间RTT就把发送放的cwnd加1**.
- **快重传与快恢复：** 在 TCP/IP 中，快速重传和恢复（fast retransmit and recovery，FRR）是一种拥塞控制算法。





